#!/usr/bin/env bash
#
# git-remote-host-provider - Detect if remote is GitHub or GitLab
#

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
source "${SCRIPT_DIR}/lib/common.sh"
source "${SCRIPT_DIR}/lib/vcs-hosting.sh"

show_help() {
    cat <<EOF
Usage: git remote-host-provider [REMOTE]

Detect if remote is GitHub or GitLab. Caches result in .git/config.

Arguments:
  REMOTE    Remote name to check (default: origin)

Options:
  -h, --help    Show this help message

Examples:
  git remote-host-provider           # Check origin
  git remote-host-provider upstream  # Check upstream remote
EOF
}

main() {
    if [[ "${1:-}" == "-h" ]] || [[ "${1:-}" == "--help" ]]; then
        show_help
        exit 0
    fi

    require_git_repo

    vcs_get_host "${1:-origin}"
}

main "$@"
